---
import Header from "../components/layout/Header.astro";
import Footer from "../components/layout/Footer.astro";
import BaseHead from "../components/BaseHead.astro";
import "../styles/global.css";
import type { Language } from "../utils/i18n";

export interface Props {
  title?: string;
  description?: string;
  lang?: Language;
  canonicalPath?: string;
}

const {
  title = "Arawi Aura",
  description,
  lang = "en",
  canonicalPath,
} = Astro.props;
---

<!doctype html>
<html lang={lang} class="scroll-smooth">
  <head>
    <BaseHead
      {lang}
      {title}
      {description}
      image={description ? undefined : "/images/og-image.jpg"}
      {canonicalPath}
    />
  </head>

  <body class="min-h-screen bg-background text-onBackground font-sans">
    <div class="min-h-screen flex flex-col">
      <Header {lang} />

      <main class="flex-1 container mx-auto px-4 py-8">
        <slot />
      </main>

      <Footer {lang} />
    </div>
    <script is:inline type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "{seo.siteName}",
        "url": "{seo.url}",
        "description": "{seo.description}",
        "inLanguage": "{lang}",
        "potentialAction": {
          "@type": "SearchAction",
          "target": "{seo.url}/?q={search_term_string}",
          "query-input": "required name=search_term_string"
        }
      }
    </script>
    <script>
      // Sistema de tema manual usando data-theme attribute
      (function () {
        try {
          const savedTheme = localStorage.getItem("theme");

          let theme;
          if (savedTheme && (savedTheme === "light" || savedTheme === "dark")) {
            theme = savedTheme;
          } else {
            theme = window.matchMedia("(prefers-color-scheme: dark)").matches
              ? "dark"
              : "light";
          }

          document.documentElement.setAttribute("data-theme", theme);
        } catch (e) {
          document.documentElement.setAttribute("data-theme", "light");
        }
      })();
    </script>
  </body>
</html>
