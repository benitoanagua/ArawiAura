---
import Card from "../ui/Card.astro";
import type { CollectionEntry } from "astro:content";
import type { Language } from "../../utils/i18n";
import { translations } from "../../utils/i18n";

export interface Props {
  poem: CollectionEntry<"poems">;
  lang: Language;
}

const { poem, lang } = Astro.props;
const t = translations[lang];
---

<Card elevated class="hover:shadow-lg transition-shadow">
  <article>
    <h3 class="text-xl font-semibold text-onSurface mb-2">
      <a
        href={`/${poem.slug}/`}
        class="text-primary hover:text-primary/80 transition-colors"
      >
        {poem.data.title}
      </a>
    </h3>

    <time
      datetime={poem.data.date.toISOString()}
      class="text-onSurfaceVariant text-sm block mb-3"
    >
      {
        poem.data.date.toLocaleDateString(lang, {
          year: "numeric",
          month: "long",
          day: "numeric",
        })
      }
    </time>

    <p class="text-onSurface line-clamp-3">
      {poem.body.slice(0, 150)}...
    </p>

    {
      poem.data.translation && (
        <div class="mt-4 pt-3 border-t border-outlineVariant">
          <p class="text-onSurfaceVariant text-sm">
            {t.alsoAvailable}{" "}
            <a
              href={`/${poem.data.translation}/`}
              class="text-secondary hover:text-secondary/80 transition-colors"
            >
              {t.readTranslation}
            </a>
          </p>
        </div>
      )
    }
  </article>
</Card>
