---
import PoemSearchReact from "./PoemSearch";

export interface Props {
  lang: "es" | "en";
}
const { lang } = Astro.props;

import { getCollection } from "astro:content";
const poems = await getCollection(
  "poems",
  (p) => !p.data.draft && p.slug.startsWith(lang + "/")
);
---

<PoemSearchReact
  client:load
  {lang}
  poems={poems.map((p) => ({
    slug: p.slug,
    title: p.data.title,
    lang: p.data.lang,
    body: p.body,
  }))}
/>
